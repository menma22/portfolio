---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();

// プロジェクト情報のマッピング
const projectInfo: Record<string, { title: string; url: string }> = {
  'new-fashion': {
    title: 'New Fashion - AI Look Book',
    url: 'https://ai-vr-fashion-try-on-7ssg.bolt.host/coordinate',
  },
  'vagabonds-camp': {
    title: 'Vagabonds Camp',
    url: 'https://vagabonds-camp.vercel.app/',
  },
  'unesco-globe': {
    title: 'UNESCO Globe',
    url: 'https://menma22.github.io/unesco-globe/',
  },
  'briefly': {
    title: 'BRIEFLY',
    url: 'https://favorite-news-latter.vercel.app/',
  },
};

const info = projectInfo[project.slug] || { title: project.slug, url: '#' };
---

<Layout title={info.title}>
  <main class="container mx-auto px-4 py-12 max-w-4xl">
    <!-- 戻るボタン -->
    <a href="/portfolio" class="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 mb-8 transition-colors">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
      </svg>
      <span>ポートフォリオに戻る</span>
    </a>
    
    <!-- レポートコンテンツ -->
    <article class="bg-white rounded-3xl shadow-xl border border-gray-200 overflow-hidden">
      <!-- ヘッダー -->
      <div class="p-8 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50">
        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">{info.title}</h1>
      </div>
      
      <!-- Markdownコンテンツ -->
      <div class="p-8 prose prose-lg max-w-none prose-headings:text-gray-900 prose-h2:text-blue-800 prose-h2:border-b-2 prose-h2:border-blue-500 prose-h2:pb-2 prose-h3:text-gray-800 prose-h3:border-l-4 prose-h3:border-purple-500 prose-h3:pl-4 prose-strong:text-gray-900 prose-blockquote:bg-amber-50 prose-blockquote:border-l-amber-500 prose-blockquote:py-4 prose-blockquote:px-6 prose-blockquote:rounded-r-lg prose-blockquote:not-italic">
        <Content />
      </div>
      
      <!-- アクションボタン -->
      <div class="p-8 border-t border-gray-200 bg-gray-50">
        <div class="flex flex-col sm:flex-row gap-4">
          <a href={info.url} target="_blank" rel="noopener noreferrer" 
            class="flex-1 flex items-center justify-center gap-3 px-8 py-4 rounded-2xl 
            bg-gradient-to-r from-blue-600 to-purple-600 
            hover:from-blue-500 hover:to-purple-500
            text-white font-semibold text-lg
            shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40
            transform hover:scale-[1.02] transition-all duration-300">
            <span>サイトを開く</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
            </svg>
          </a>
          <a href="/portfolio" 
            class="flex-1 flex items-center justify-center gap-3 px-8 py-4 rounded-2xl 
            bg-white hover:bg-gray-100
            border border-gray-200 hover:border-gray-300
            text-gray-700 font-semibold text-lg
            transform hover:scale-[1.02] transition-all duration-300">
            戻る
          </a>
        </div>
      </div>
    </article>
  </main>
</Layout>

<style is:global>
  /* Markdownの追加スタイリング */
  .prose h1 {
    display: none;
  }
  
  .prose h2 {
    margin-top: 2.5rem;
    margin-bottom: 1rem;
  }
  
  .prose h2:first-of-type {
    margin-top: 0;
  }
  
  .prose h3 {
    margin-top: 1.5rem;
  }
  
  .prose ul {
    list-style: none;
    padding-left: 0;
  }
  
  .prose ul > li {
    position: relative;
    padding-left: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .prose ul > li::before {
    content: "▸";
    position: absolute;
    left: 0;
    color: #8b5cf6;
    font-weight: bold;
  }
  
  .prose blockquote {
    font-style: normal;
  }
  
  .prose blockquote p {
    color: #92400e;
  }
</style>
